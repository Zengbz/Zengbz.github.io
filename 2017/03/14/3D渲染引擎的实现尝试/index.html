<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>OpenGL ES 2.0环境下3D渲染引擎实现 | 曾炳忠</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.2.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.2.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">OpenGL ES 2.0环境下3D渲染引擎实现</h1><a id="logo" href="/.">曾炳忠</a><p class="description">我的个人博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 导航</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">OpenGL ES 2.0环境下3D渲染引擎实现</h1><div class="post-meta">Mar 14, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2017/03/14/3D渲染引擎的实现尝试/" href="/2017/03/14/3D渲染引擎的实现尝试/#comments" class="ds-thread-count"></a><div class="post-content"><p>OpenGL ES 2.0环境下3D渲染引擎的研究与实现</p>
<p> <a href="#1">   前言</a><br> <a href="#2">1、平台的搭建</a><br> <a href="#3">2、着色器</a><br> <a href="#4">3、绘制类的封装</a><br> <a href="#5">4、动画实现</a><br> <a href="#6">5、摄像头</a><br> <a href="#7">6、应用</a></p>
<h2 id="1">前言</h2><br>&gt; 15年底由于工作的工作室在游戏制作的方向上要求往3D方向发展，但是由于游戏最终执行的平台是街机主板，在诸多条件例如物理内存过小、显卡内存过小等等被限制情况下，并不能使用主流的3D游戏引擎进行制作。于是工作室将实现一个实用、简单的3D游戏引擎的研究任务交给了我和另一个同事，历时1个月后，终于将这个“3D游戏引擎”实现了。“3D游戏引擎”之所以打了双引号，是因为，这还不能算是一个完整的游戏引擎，只包含了其中的<strong>渲染引擎、动画实现、资源管理、音视频实现、接口设备、简单物理处理</strong>，这几项内容。当然，这已经足够实现一个简单的3D游戏了。但是本文主要讲的是3D渲染引擎的实现和一些动画处理的内容。<br><br><br><h2 id="2">1、平台的搭建</h2>

<p> </p><h3>1、开发环境</h3><br>  开发环境的搭建在这里省略。推荐一篇博文：<br>  <a href="http://blog.csdn.net/tspangle/article/details/38735071" target="_blank" rel="external">http://blog.csdn.net/tspangle/article/details/38735071</a><br> <h3>2、 EGL窗口管理API</h3><br>  为了减少在使用OpenGL ES 2.0在不同系统上进行编程的工作量，在这里使用Khronos提供的平台独立的API叫做EGL，它能够用来管理绘制窗口。EGL 提供 OpenGL ES 2.0（包括其它 Khronos 工作组的 API）和计算机运行的操作系统之间通讯，例如运行 X 视窗的 GNU/Linux 系统、微软系统、苹果的 Mac OS 系统。EGL 在决定绘制什么类型的窗口前，需要打开和操作系统的通讯连接。下面利用这个API创建一个在微软系统下游戏绘制的窗口。<p></p>
<p><strong>生成EGL初始化的数据对象</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//! 窗口的高度</div><div class="line">int         _width;</div><div class="line">//! 窗口的宽度</div><div class="line">int         _height;</div><div class="line">//! EGL配置 </div><div class="line">EGLConfig   _config;</div><div class="line">//！ EGL创建窗口对象</div><div class="line">EGLSurface  _surface;</div><div class="line">//！ EGL上下文数据</div><div class="line">EGLContext  _context;</div><div class="line">//！ 窗口管理对象</div><div class="line">EGLDisplay  _display;</div></pre></td></tr></table></figure></p>
<p><strong>初始化窗口</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">void initGLE(unsigned long hwnd)</div><div class="line">&#123;</div><div class="line">	//配置EGL属性</div><div class="line">	const EGLint attribs[] =</div><div class="line">            &#123;</div><div class="line">                EGL_SURFACE_TYPE, EGL_WINDOW_BIT,</div><div class="line">                EGL_BLUE_SIZE, 8,</div><div class="line">                EGL_GREEN_SIZE, 8,</div><div class="line">                EGL_RED_SIZE, 8,</div><div class="line">				EGL_ALPHA_SIZE, 8,</div><div class="line">				EGL_BUFFER_SIZE, 32,</div><div class="line">                EGL_DEPTH_SIZE,24,</div><div class="line">                EGL_NONE</div><div class="line">            &#125;;</div><div class="line">            EGLint 	format(0);</div><div class="line">            EGLint	numConfigs(0);</div><div class="line">            EGLint  major;</div><div class="line">            EGLint  minor;</div><div class="line"></div><div class="line">            //! 获取系统配置</div><div class="line">            _display	    =	eglGetDisplay(GetDC((HWND)hwnd));</div><div class="line"></div><div class="line">            //! 初始化</div><div class="line">            eglInitialize(_display, &amp;major, &amp;minor);</div><div class="line">            eglBindAPI(EGL_OPENGL_ES_API);</div><div class="line"></div><div class="line">            //！ 配置EGL数据</div><div class="line">            eglChooseConfig(_display, attribs, &amp;_config, 1, &amp;numConfigs);</div><div class="line"></div><div class="line">            eglGetConfigAttrib(_display, _config, EGL_NATIVE_VISUAL_ID, &amp;format);          </div><div class="line">            //! 创建窗口</div><div class="line">            _surface	    = 	eglCreateWindowSurface(_display, _config, (HWND)hwnd, NULL);</div><div class="line"></div><div class="line"></div><div class="line">            //! 配置EGL上下文</div><div class="line">            EGLint attr[]   =   &#123; EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE, EGL_NONE &#125;;</div><div class="line">            _context 	    = 	eglCreateContext(_display, _config, 0, attr);</div><div class="line">            //! 检测EGL创建窗口是否成功</div><div class="line">            if (eglMakeCurrent(_display, _surface, _surface, _context) == EGL_FALSE)</div><div class="line">            &#123;</div><div class="line">                return ;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">			//设置视口</div><div class="line">            eglQuerySurface(_display, _surface, EGL_WIDTH,  &amp;_width);</div><div class="line">            eglQuerySurface(_display, _surface, EGL_HEIGHT, &amp;_height);			</div><div class="line">			glViewport(0, 0, _width, _height);</div><div class="line"></div><div class="line">//////////2d</div><div class="line">			//2D正交投影矩阵转换</div><div class="line">			g_2DMVP  =   ortho&lt;float&gt;(0,float(_width),float(_height),0,-1.0f,100.0f);</div><div class="line">			</div><div class="line">////////////3d   g_3DMVP</div><div class="line">			//3D透视投影矩阵转换</div><div class="line">			g_3DMVP =   perspective(45.0f, (GLfloat)_width / (GLfloat)_height, 0.1f, 100.0f);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>完成这一步之后，窗口已经创建起来了。在主线程循环中调用窗口绘制函数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">eglSwapBuffers(_display,_surface);</div></pre></td></tr></table></figure></p>
<h2 id="3">2、着色器</h2><br>OpenGL可编程处理器相对于OpenGL之前版本的固定管道，主要更改的地方在于编程人员可以在图形绘制的顶点处理和片元处理的固定功能阶段进行编程进行补充。而这个阶段我们编写的高级语言则是着色器语言。本文是使用“OpenGL着色器语言”对着色器进行编写，OpenGL着色器分为两个可编程处理器：<strong>顶点着色器、片元着色器</strong>。以下则是本项目对着色器进行封装的过程：<br><br>创建了一个类对OpenGL ES2.0着色器进行创建和引用。<br>头文件部分：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#if !defined(__SHADERCONTAINER_H_)</div><div class="line">#define __SHADERCONTAINER_H_</div><div class="line"></div><div class="line">#include &lt;EGL/egl.h&gt;</div><div class="line">#include &lt;gles2/gl2.h&gt;</div><div class="line"></div><div class="line">//可扩充着色器枚举</div><div class="line">enum SHD_TYPE</div><div class="line">&#123;</div><div class="line">	SHD_LINE=0,/*参数ID，0:mvp 1:positon 2:color*/</div><div class="line">	SHD_SURFACE2D,</div><div class="line">	SHD_MODEL3D,</div><div class="line">	SHD_MAX</div><div class="line">&#125;;</div><div class="line"></div><div class="line">class ShaderContainer</div><div class="line">&#123;</div><div class="line">public:</div><div class="line">	 ShaderContainer();</div><div class="line">	 ~ShaderContainer();</div><div class="line">	//获取不同的着色器枚举类型</div><div class="line">	int GetProgramID(SHD_TYPE type);</div><div class="line">protected:</div><div class="line">	//着色器ID</div><div class="line">	GLuint *m_pID;</div><div class="line">	//片元着色器</div><div class="line">	GLuint *m_pFID;</div><div class="line">	//定点着色器</div><div class="line">	GLuint *m_pVID;</div><div class="line">	//创建着色器的过程	</div><div class="line">	int CreateProgram(char *pV,char *pF,SHD_TYPE type);</div><div class="line">&#125;;</div><div class="line">#endif</div></pre></td></tr></table></figure><br><br>函数体装载着色器部分<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">int ShaderContainer::CreateProgram(char *pV,char *pF,SHD_TYPE type)</div><div class="line">&#123;</div><div class="line">	int PID;</div><div class="line">	int VID;</div><div class="line">	int FID;</div><div class="line">	bool        error   =   false;</div><div class="line">       </div><div class="line">    if (pV!=NULL)</div><div class="line">    &#123;</div><div class="line">		//创建着色器对象</div><div class="line">        VID   = glCreateShader( GL_VERTEX_SHADER );</div><div class="line">		//装载着色器源码</div><div class="line">        glShaderSource( VID, 1, (const GLchar **)&amp;pV, 0 );</div><div class="line">		//装载着色器对象</div><div class="line">        glCompileShader( VID );</div><div class="line">		//装载状态和产生的错误被打印出来:</div><div class="line">        GLint   compileStatus;</div><div class="line">        glGetShaderiv( VID, GL_COMPILE_STATUS, &amp;compileStatus );</div><div class="line">        error   =   compileStatus == GL_FALSE;</div><div class="line">        if( error )</div><div class="line">        &#123;</div><div class="line">            GLchar messages[256];</div><div class="line">            glGetShaderInfoLog( VID, sizeof(messages), 0,messages);	</div><div class="line">			::MessageBoxA(::GetDesktopWindow(),messages,&quot;VERTEX_SHADER&quot;,0);</div><div class="line">            assert( messages &amp;&amp; 0 != 0);</div><div class="line">			glDeleteShader(VID);</div><div class="line">			return 0;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    if (pF!=NULL)</div><div class="line">    &#123;</div><div class="line">        FID   = glCreateShader( GL_FRAGMENT_SHADER );</div><div class="line">        glShaderSource( FID, 1,(const GLchar **) &amp;pF, 0 );</div><div class="line">        glCompileShader( FID );</div><div class="line"></div><div class="line">        GLint   compileStatus;</div><div class="line">        glGetShaderiv( FID, GL_COMPILE_STATUS, &amp;compileStatus );</div><div class="line">        error   =   compileStatus == GL_FALSE;</div><div class="line"></div><div class="line">        if( error )</div><div class="line">        &#123;</div><div class="line">            GLchar messages[256];</div><div class="line">            glGetShaderInfoLog( FID, sizeof(messages), 0,messages);</div><div class="line">			::MessageBoxA(::GetDesktopWindow(),messages,&quot;FRAGMENT_SHADER&quot;,0);</div><div class="line">            assert( messages &amp;&amp; 0 != 0);</div><div class="line">			glDeleteShader(VID);</div><div class="line">			glDeleteShader(FID);</div><div class="line">			return 0;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">	//创建项目对象</div><div class="line">    PID  =   glCreateProgram( );</div><div class="line">	//链接着色器</div><div class="line">    glAttachShader( PID, VID);</div><div class="line">    glAttachShader( PID, FID);</div><div class="line">          </div><div class="line">    //链接项目检查错误:       </div><div class="line">    glLinkProgram( PID );</div><div class="line"></div><div class="line">    GLint linkStatus;</div><div class="line">    glGetProgramiv( PID, GL_LINK_STATUS, &amp;linkStatus );</div><div class="line">    if (linkStatus == GL_FALSE)</div><div class="line">    &#123;</div><div class="line">        GLchar messages[256];</div><div class="line">        glGetProgramInfoLog( PID, sizeof(messages), 0, messages);</div><div class="line">		::MessageBoxA(::GetDesktopWindow(),messages,&quot;LINK_STATUS&quot;,0);</div><div class="line">        assert( messages &amp;&amp; 0 != 0);</div><div class="line">		glDeleteShader(VID);</div><div class="line">		glDeleteShader(FID);</div><div class="line">		glDeleteProgram(PID);</div><div class="line">		return 0;</div><div class="line">    &#125;</div><div class="line">    //glUseProgram(program._programId);</div><div class="line">	m_pFID[type] = FID;</div><div class="line">	m_pVID[type] = VID;</div><div class="line">	m_pID[type] = PID;</div><div class="line">	return PID;</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br>对着色器的装载过程中我们从文本中获取着色器的代码，以下部分代码是对3D模型处理的着色器代码，在顶点着色器中，我们对模型读取之后的几何体数据（顶点、UV）和矩阵的转换（MVP）传入定点着色器进行转换处理。<br>顶点着色器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//设置精度为mediump</div><div class="line">&quot;precision  mediump float; &quot;</div><div class="line">//外部传入的MVP统一体</div><div class="line">&quot;uniform   mat4 MVP;&quot;</div><div class="line">//外部传入的定点数据</div><div class="line">&quot;attribute vec3 position;&quot;</div><div class="line">//外部传入的UV数据</div><div class="line">&quot;attribute vec2 uv;&quot;</div><div class="line">//即将传入片元着色器的UV数据</div><div class="line">&quot;varying   vec2 outUV;&quot;</div><div class="line">&quot;void main()&quot;</div><div class="line">&quot;&#123;&quot;</div><div class="line">&quot;   vec4    pos =   vec4(position.x,position.y,position.z,1);&quot;</div><div class="line">&quot;   gl_Position =   MVP * pos;&quot;</div><div class="line">&quot;   outUV      =   uv;&quot;</div><div class="line">&quot;&#125;&quot;</div></pre></td></tr></table></figure><br><br>片元着色器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&quot;precision  mediump float; &quot;</div><div class="line">&quot;uniform    sampler2D   texture;\n&quot;</div><div class="line">&quot;uniform    vec4        color;\n&quot;</div><div class="line">&quot;varying    vec2        outUV;&quot;</div><div class="line">&quot;void main()&quot;</div><div class="line">&quot;&#123;&quot;</div><div class="line">&quot;   vec4   color   =   texture2D(texture,outUV);&quot;</div><div class="line">&quot;   gl_FragColor   =   color;&quot;</div><div class="line">&quot;&#125;&quot;</div></pre></td></tr></table></figure><br><br>着色器配置完毕之后，便可以搭建绘制几何体数据的过程了。<br><br><h2 id="4">3、绘制类的封装</h2><br>我们知道，游戏画面在程序执行的过程中是一只都在执行的，只是在绘制的过程中我们不断的通过画刷来不断的刷新我们所要的游戏画面，从而使游戏画面成为一个流畅的进行时过程。那么，游戏画面的绘制过程的编写就遵循了一个过程：初始化获取画面数据→循环的绘制过程。通过这个过程我们设计一个虚类来统一绘制的过程，而不同的绘制需求进行不同的函数重构。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">class RenderBase</div><div class="line">&#123;</div><div class="line">public:</div><div class="line">	 RenderBase();</div><div class="line">	virtual ~RenderBase();</div><div class="line">	//初始化数据</div><div class="line">	virtual void init(void)=0;</div><div class="line">	//绘制</div><div class="line">	virtual void draw(void)=0;</div><div class="line">protected:</div><div class="line">	int m_PID;</div><div class="line">	virtual void begin(void)=0;</div><div class="line">	virtual void render(void)=0;</div><div class="line">	virtual void end(void)=0;</div><div class="line">&#125;;</div><div class="line">//着色器</div><div class="line">extern ShaderContainer g_sha;</div><div class="line">//投影</div><div class="line">extern matrix4 g_2DMVP;</div><div class="line">extern matrix4 g_3DMVP;</div><div class="line">//摄像头</div><div class="line">extern  CELL::CELL3RDCamera	  g_Camera;</div></pre></td></tr></table></figure><br><br>接下来是一个3D绘制的实例应用，我们的父类继承之Renderbase。<br>文件头部分：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">#ifndef __SURFACE3D_H__</div><div class="line">#define  __SURFACE3D_H__</div><div class="line"></div><div class="line">#include &quot;RenderBase.h&quot;</div><div class="line">#include &quot;loadModel3d.h&quot;</div><div class="line">class surface3D:public RenderBase</div><div class="line">&#123;</div><div class="line">public:</div><div class="line">	surface3D();</div><div class="line">	~surface3D();</div><div class="line"></div><div class="line">	void init(void);</div><div class="line">	void draw(void);</div><div class="line"></div><div class="line">	//当前帧</div><div class="line">	int					m_curframe;</div><div class="line">	matrix4				m_MVP;</div><div class="line">	Modeldata			*m_Model;</div><div class="line">	bool                 m_bRroM;</div><div class="line">	bool				m_bDepth;</div><div class="line">	</div><div class="line">protected:</div><div class="line">	void begin(void);</div><div class="line">	void render(void);</div><div class="line">	void end(void);</div><div class="line"></div><div class="line">	unsigned int		m_pointAttrID;</div><div class="line">	unsigned int		m_MPVAttrID;</div><div class="line">	unsigned int		m_UVAttrID;</div><div class="line">	unsigned int		m_NormalAttrID;</div><div class="line">	unsigned int		m_colorAttrID;</div><div class="line">	unsigned int		m_textAttrID;</div><div class="line"></div><div class="line">	matrix4				m_matRotate;</div><div class="line">	matrix4             m_selfRot;</div><div class="line">	matrix4				m_matPositon;</div><div class="line">	matrix4				m_selfPos;</div><div class="line">	matrix4				m_matScale;</div><div class="line">	float4				m_color;</div><div class="line">&#125;;</div><div class="line">#endif</div></pre></td></tr></table></figure><br><br>实现部分：<br>初始化部分获3D着色器的ID，并将该着色器数据保存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">void surface3D::init( void )</div><div class="line">&#123;</div><div class="line">	m_PID = g_sha.GetProgramID(SHD_MODEL3D);</div><div class="line">	if (m_PID!=0)</div><div class="line">	&#123;</div><div class="line">		glUseProgram(m_PID);</div><div class="line">		m_pointAttrID = glGetAttribLocation(m_PID, &quot;position&quot;);</div><div class="line">		m_colorAttrID = glGetUniformLocation(m_PID, &quot;color&quot;);</div><div class="line">		m_UVAttrID = glGetAttribLocation(m_PID, &quot;uv&quot;);</div><div class="line">		m_MPVAttrID = glGetUniformLocation(m_PID,&quot;MVP&quot;);</div><div class="line">		m_textAttrID = glGetUniformLocation(m_PID,&quot;texture&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br>绘制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">void surface3D::draw( void )</div><div class="line">&#123;</div><div class="line">	if (m_PID==0)</div><div class="line">	&#123;</div><div class="line">		return;</div><div class="line">	&#125;	</div><div class="line"></div><div class="line">	begin();</div><div class="line"> 	render();</div><div class="line">	end();</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br>绑定着色器ID，绑定着色器数据，开启深度测试，开启纹理绘制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">void surface3D::begin( void )</div><div class="line">&#123;</div><div class="line">	glEnable(GL_BLEND);</div><div class="line">	glBlendFuncSeparate(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA, GL_ONE, GL_ONE_MINUS_SRC_ALPHA);</div><div class="line">	glUseProgram(m_PID);</div><div class="line">	if (m_bDepth)</div><div class="line">	&#123;</div><div class="line">		glEnable(GL_DEPTH_TEST);</div><div class="line">	&#125;</div><div class="line">	glEnable(GL_TEXTURE_2D);</div><div class="line">	glEnableVertexAttribArray(m_pointAttrID);</div><div class="line">	glEnableVertexAttribArray(m_UVAttrID);</div><div class="line">	glEnableVertexAttribArray(m_colorAttrID);</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br>将几何体数据传入顶点着色器和片元着色器进行绘制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">void surface3D::render( void )</div><div class="line">&#123;</div><div class="line">	glUniform1i(m_Model-&gt;TextID,0);</div><div class="line">	glUniformMatrix4fv(m_MPVAttrID, 1, false, m_MVP.data());</div><div class="line">	glUniform4f(m_colorAttrID,m_color.x,m_color.y,m_color.z,m_color.w);//////</div><div class="line">	glBindTexture(GL_TEXTURE_2D,m_Model-&gt;TextID);</div><div class="line">	//---------------------------------</div><div class="line">	glBindBuffer(GL_ARRAY_BUFFER,m_Model-&gt;vertexBufferId[m_curframe]);</div><div class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,m_Model-&gt;indexBufferId);</div><div class="line">	glVertexAttribPointer(m_pointAttrID,3,  GL_FLOAT,   false,sizeof(float)*3 ,0);</div><div class="line">	glBindBuffer(GL_ARRAY_BUFFER,0);</div><div class="line"></div><div class="line">	glBindBuffer(GL_ARRAY_BUFFER,m_Model-&gt;UvBufferId);</div><div class="line">	glVertexAttribPointer(m_UVAttrID,	   2,  GL_FLOAT,   false,sizeof(float)*2 ,0);</div><div class="line">	//glVertexAttribPointer(m_colorAttrID,   4,  GL_FLOAT,   false,sizeof(float)*3 ,0);</div><div class="line">	//glDrawElements(GL_TRIANGLES,readxml.m_Face_count*3,GL_UNSIGNED_SHORT,0);</div><div class="line">	glDrawElements(GL_TRIANGLES,m_Model-&gt;Indexsize,GL_UNSIGNED_SHORT,0);</div><div class="line">	//---------------------------------</div><div class="line">	glBindBuffer(GL_ARRAY_BUFFER,0);</div><div class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,0);</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br>解除着色器ID绑定，解除着色器数据绑定，关闭深度测试，关闭纹理绘制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">void surface3D::end( void )</div><div class="line">&#123;</div><div class="line">	glBindTexture(GL_TEXTURE_2D,0);</div><div class="line">	glDisableVertexAttribArray(m_pointAttrID);</div><div class="line">	glDisableVertexAttribArray(m_UVAttrID);</div><div class="line">	glDisableVertexAttribArray(m_colorAttrID);</div><div class="line">	glUseProgram(0);</div><div class="line">	if (m_bDepth)</div><div class="line">	&#123;</div><div class="line">		glDisable(GL_DEPTH_TEST);</div><div class="line">	&#125;</div><div class="line">	glDisable(GL_TEXTURE_2D);</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br><h2 id="5">4、动画实现</h2><br>  绘制类实现之后，当然的我们便可以将3D模型读取进入游戏进行绘制了。但是我们缺乏对模型和模型的骨骼动画播放的控制。所以，我们还需要封装一个动画类，以方便对模型绘制的控制，例如对模型进行空间上的位移、旋转、缩放，更换模型，动画帧播放等等。动画实现类我们约定遵循一个过程：初始化数据、更新、绘制。<br>动画实现的封装：<br>头文件部分<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">#pragma once</div><div class="line">#include &quot;surface3D.h&quot;</div><div class="line"></div><div class="line">struct Animat_3D</div><div class="line">&#123;</div><div class="line">	Modeldata *Model;</div><div class="line">	int nframes;</div><div class="line">	float FPS;</div><div class="line">&#125;;</div><div class="line">class C3DAnimation:public surface3D</div><div class="line">&#123;</div><div class="line">public:</div><div class="line">	C3DAnimation(Modeldata	*Model);</div><div class="line">	C3DAnimation(C3DAnimation *b);</div><div class="line"></div><div class="line">	~C3DAnimation(void);</div><div class="line">	//动画更新</div><div class="line">	void		Update();</div><div class="line">	//世界坐标旋转</div><div class="line">	void		setRotate(float3 frotate);</div><div class="line">	//自身坐标旋转</div><div class="line">	void		setselfRotate(float3 frotate);</div><div class="line">	//世界坐标位移</div><div class="line">	void		setPositon(float3 fPositon);</div><div class="line">	//自身坐标位移</div><div class="line">	void		setSelfPos(float3 fPositon);</div><div class="line">	//缩放	</div><div class="line">	void		setScale(float3 fScale);</div><div class="line">	float3		getPosition();</div><div class="line">	float3		getSelfpos();</div><div class="line">	float3		getRotate();</div><div class="line">	float3		getSelfrot();</div><div class="line">	float3		getScale();</div><div class="line">	//更换模型</div><div class="line">	void		SetModel(Modeldata	*Model);</div><div class="line">	//变换颜色</div><div class="line">	void		SetColor(unsigned char r,unsigned char g,unsigned char b,unsigned char a=255);</div><div class="line">	</div><div class="line">	//播放动画</div><div class="line">	void		Play();</div><div class="line">	//停止动画播放</div><div class="line">	void		Stop() &#123; m_bPlaying=false; &#125;</div><div class="line"></div><div class="line">	void		SetFps(float FPS) &#123; m_iFPS=FPS; &#125;</div><div class="line">	void		SetFrame(int n);</div><div class="line">	void		SetFrameAdd();</div><div class="line">	void		SetFrames(int n) &#123; m_inframes=n; &#125;</div><div class="line"></div><div class="line">	void		Settimer(int itimer) &#123; m_iTimer=itimer; &#125;</div><div class="line"></div><div class="line">	Modeldata	*GetModel() const &#123; return m_Model; &#125;</div><div class="line"></div><div class="line">	float		GetFps() &#123; return m_iFPS; &#125;</div><div class="line">	int			GetFrame() &#123; return m_curframe; &#125;</div><div class="line">	int			GetFrames() &#123; return m_inframes; &#125;</div><div class="line">	C3DAnimation	 operator = (C3DAnimation b);</div><div class="line"></div><div class="line">	void		setState(int ibeginfs,int iendfs,short fps);</div><div class="line">	bool		GetStateEnd();</div><div class="line">	void		setDepth(bool bDtest)&#123;m_bDepth = bDtest;&#125;;</div><div class="line">private:</div><div class="line">	bool		m_bPlaying;</div><div class="line">	int			m_inframes,m_iFPS,m_inCurFrame;</div><div class="line">	int			m_r,m_g,m_b,m_a;</div><div class="line">	int			m_iTimer;</div><div class="line"></div><div class="line">	int         m_iBeginfs;</div><div class="line">	int			m_iEndfs;</div><div class="line">	bool        m_bEnd;</div><div class="line"></div><div class="line">	float3		m_position;</div><div class="line">	float3		m_selfpos;</div><div class="line">	float3		m_rotate;</div><div class="line">	float3		m_selfrot;</div><div class="line">	float3		m_scale;</div><div class="line">&#125;;</div></pre></td></tr></table></figure><br><br>实现函数体部分<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div></pre></td><td class="code"><pre><div class="line">#include &quot;C3DAnimation.h&quot;</div><div class="line">C3DAnimation::C3DAnimation( Modeldata *Model)</div><div class="line">&#123;</div><div class="line">	m_Model = Model;</div><div class="line">	m_inframes = Model-&gt;frames;</div><div class="line">	m_iFPS = Model-&gt;Fps;</div><div class="line">	if(m_iFPS&lt;=0)</div><div class="line">	&#123;</div><div class="line">		m_iFPS = 1;</div><div class="line">	&#125;</div><div class="line">	m_iTimer = 0;</div><div class="line">	m_r = 255;</div><div class="line">	m_g = 255;</div><div class="line">	m_b = 255;</div><div class="line">	m_a = 255;</div><div class="line"></div><div class="line">	m_color.x = m_r/255.0f;</div><div class="line">	m_color.y = m_g/255.0f;</div><div class="line">	m_color.z = m_b/255.0f;</div><div class="line">	m_color.w = m_a/255.0f;</div><div class="line"></div><div class="line">	m_curframe = 0;</div><div class="line">	m_iBeginfs = 0;</div><div class="line">	m_iEndfs = Model-&gt;frames -1;</div><div class="line">	m_bDepth = true;</div><div class="line">	m_bPlaying = true;</div><div class="line">	m_bRroM = true;</div><div class="line">	m_bEnd =false;</div><div class="line">	m_position = float3(0,0,0);</div><div class="line">	m_selfpos = float3(0,0,0);</div><div class="line">	m_rotate = float3(0,0,0);</div><div class="line">	m_selfrot = float3(0,0,0);</div><div class="line">	m_scale = float3(1,1,1);</div><div class="line"></div><div class="line">	init();</div><div class="line">&#125;</div><div class="line"></div><div class="line">C3DAnimation::C3DAnimation( C3DAnimation *b )</div><div class="line">&#123;</div><div class="line">	m_Model = b-&gt;m_Model;</div><div class="line">	m_inframes = b-&gt;m_inframes;</div><div class="line">	m_iFPS = b-&gt;m_iFPS;</div><div class="line">	m_iTimer = b-&gt;m_iTimer;</div><div class="line">	m_r = b-&gt;m_r;</div><div class="line">	m_g = b-&gt;m_g;</div><div class="line">	m_b = b-&gt;m_b;</div><div class="line">	m_a = b-&gt;m_a;</div><div class="line">	m_color = b-&gt;m_color;</div><div class="line"></div><div class="line">	m_bPlaying = b-&gt;m_bPlaying;</div><div class="line">	m_curframe = b-&gt;m_curframe;</div><div class="line">	m_bRroM = b-&gt;m_bRroM;</div><div class="line">	m_bDepth = b-&gt;m_bDepth;</div><div class="line">	m_iBeginfs = b-&gt;m_iBeginfs;</div><div class="line">	m_iEndfs = b-&gt;m_iEndfs;</div><div class="line">	m_bEnd = b-&gt;m_bEnd;</div><div class="line"></div><div class="line">	m_position = b-&gt;m_position;</div><div class="line">	m_selfpos = b-&gt;m_selfpos;</div><div class="line">	m_rotate = b-&gt;m_rotate;</div><div class="line">	m_selfrot = b-&gt;m_selfrot;</div><div class="line">	m_scale = b-&gt;m_scale;</div><div class="line"></div><div class="line">	init();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">C3DAnimation::~C3DAnimation(void)</div><div class="line">&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::setRotate(float3 frotate)</div><div class="line">&#123;</div><div class="line">	m_rotate = frotate;</div><div class="line">	m_matRotate.rotateYXZ(frotate.y,frotate.x,frotate.z);</div><div class="line">	//m_MVP = m_MVP * m_matRotate;</div><div class="line">&#125;</div><div class="line">void C3DAnimation::setselfRotate(float3 frotate)</div><div class="line">&#123;</div><div class="line">	m_selfrot = frotate;</div><div class="line">	m_selfRot.rotateYXZ(frotate.y,frotate.x,frotate.z);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::setPositon(float3 fPositon)</div><div class="line">&#123;</div><div class="line">	m_position = fPositon;</div><div class="line">	m_matPositon.translate(fPositon.x,fPositon.y,fPositon.z);</div><div class="line">	//m_MVP = m_MVP*m_matPositon;</div><div class="line">&#125;</div><div class="line">void C3DAnimation::setSelfPos(float3 fPositon)</div><div class="line">&#123;</div><div class="line">	m_selfpos = fPositon;</div><div class="line">	m_selfPos.translate(fPositon);</div><div class="line">&#125;</div><div class="line">void C3DAnimation::setScale(float3 fScale)</div><div class="line">&#123;</div><div class="line">	m_scale = fScale;</div><div class="line">	m_matScale.scale(fScale.x,fScale.y,fScale.z);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::setbRroM(bool b)</div><div class="line">&#123;</div><div class="line">	m_bRroM = b;</div><div class="line">	//m_MVP = g_Camera.getProject() * g_Camera.getView();</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::Update()</div><div class="line">&#123;</div><div class="line">	if (m_bPlaying)</div><div class="line">	&#123;</div><div class="line">		m_iTimer++;</div><div class="line">		if((m_iTimer%(60/m_iFPS))==0)</div><div class="line">		&#123;</div><div class="line">			m_curframe++;</div><div class="line">			if (m_curframe&gt;=m_iEndfs)</div><div class="line">			&#123;</div><div class="line">				m_bEnd = true;</div><div class="line">			&#125;</div><div class="line">			if(m_curframe&gt;m_iEndfs)</div><div class="line">			&#123;</div><div class="line">				m_curframe = m_iBeginfs;</div><div class="line">			&#125;</div><div class="line">			m_iTimer = 0;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::SetModel( Modeldata *Model )</div><div class="line">&#123;</div><div class="line">	m_Model = Model;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::SetColor( unsigned char r,unsigned char g,unsigned char b,unsigned char a/*=255*/ )</div><div class="line">&#123;</div><div class="line">	m_r = r;</div><div class="line">	m_g = g;</div><div class="line">	m_b = b;</div><div class="line">	m_a = a;</div><div class="line"></div><div class="line">	m_color.x = m_r/255.0f;</div><div class="line">	m_color.y = m_g/255.0f;</div><div class="line">	m_color.z = m_b/255.0f;</div><div class="line">	m_color.w = m_a/255.0f;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::Play()</div><div class="line">&#123;</div><div class="line">	m_bPlaying = true;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::SetFrame( int n )</div><div class="line">&#123;</div><div class="line">	m_curframe = n%m_inframes;</div><div class="line">&#125;</div><div class="line"></div><div class="line">C3DAnimation C3DAnimation::operator=( C3DAnimation b )</div><div class="line">&#123;</div><div class="line">	m_Model = b.m_Model;</div><div class="line">	m_inframes = b.m_inframes;</div><div class="line">	m_iFPS = b.m_iFPS;</div><div class="line">	m_iTimer = b.m_iTimer;</div><div class="line">	m_r = b.m_r;</div><div class="line">	m_g = b.m_g;</div><div class="line">	m_b = b.m_b;</div><div class="line">	m_a = b.m_a;</div><div class="line">	m_color = b.m_color;</div><div class="line"></div><div class="line">	m_bPlaying = b.m_bPlaying;</div><div class="line">	m_curframe = b.m_curframe;</div><div class="line">	m_bRroM = b.m_bRroM;</div><div class="line">	m_iBeginfs = b.m_iBeginfs;</div><div class="line">	m_iEndfs = b.m_iEndfs;</div><div class="line">	m_bEnd = b.m_bEnd;</div><div class="line">	m_bDepth = b.m_bDepth;</div><div class="line">	m_position = b.m_position;</div><div class="line">	m_selfpos = b.m_selfpos;</div><div class="line">	m_rotate = b.m_rotate;</div><div class="line">	m_selfrot = b.m_selfrot;</div><div class="line">	m_scale = b.m_scale;</div><div class="line">	init();</div><div class="line">	return *this;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::setState( int ibeginfs,int iendfs,short fps)</div><div class="line">&#123;</div><div class="line">	m_iBeginfs = ibeginfs;</div><div class="line">	m_iEndfs = iendfs;</div><div class="line">	m_curframe = ibeginfs;</div><div class="line">	m_bEnd = false;</div><div class="line">	m_iFPS = fps;</div><div class="line">	if (fps&lt;=0)</div><div class="line">	&#123;</div><div class="line">		m_iFPS = 1;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">bool C3DAnimation::GetStateEnd()</div><div class="line">&#123;</div><div class="line">	return m_bEnd;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void C3DAnimation::SetFrameAdd()</div><div class="line">&#123;</div><div class="line">	m_curframe++;</div><div class="line">	if(m_curframe&gt;=m_iEndfs)</div><div class="line">	&#123;</div><div class="line">		m_curframe = m_iBeginfs;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">float3 C3DAnimation::getPosition()</div><div class="line">&#123;</div><div class="line">	return m_position;</div><div class="line">&#125;</div><div class="line"></div><div class="line">float3 C3DAnimation::getSelfpos()</div><div class="line">&#123;</div><div class="line">	return m_selfpos;</div><div class="line">&#125;</div><div class="line"></div><div class="line">float3 C3DAnimation::getRotate()</div><div class="line">&#123;</div><div class="line">	return m_rotate;</div><div class="line">&#125;</div><div class="line"></div><div class="line">float3 C3DAnimation::getSelfrot()</div><div class="line">&#123;</div><div class="line">	return m_selfrot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">float3 C3DAnimation::getScale()</div><div class="line">&#123;</div><div class="line">	return m_scale;</div><div class="line">&#125;</div><div class="line">```</div></pre></td></tr></table></figure><br><br><h2 id="6">5、摄像头</h2><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div></pre></td><td class="code"><pre><div class="line">#pragma once</div><div class="line">#include    &quot;CELLMath.hpp&quot;</div><div class="line">namespace   CELL</div><div class="line">&#123;</div><div class="line">    class   CELL3RDCamera</div><div class="line">    &#123;</div><div class="line">    public:</div><div class="line">        float3      _eye;</div><div class="line">        float3      _up;</div><div class="line">        float3      _right;</div><div class="line">        float3      _target;</div><div class="line">        float3      _dir;</div><div class="line">        float       _radius;</div><div class="line">        matrix4     _matView;//视图矩阵</div><div class="line">        matrix4     _matProj;//投影矩阵</div><div class="line">        matrix4     _matWorld;//世界矩阵</div><div class="line">        float2      _viewSize;</div><div class="line">        float       _yaw;//Y轴</div><div class="line"></div><div class="line">    public:</div><div class="line">        CELL3RDCamera()</div><div class="line">        &#123;</div><div class="line">            _radius     =   400;//半径</div><div class="line">            _yaw        =   0;</div><div class="line">            _viewSize   =   float2(1024,768);</div><div class="line">            _matView.identify();</div><div class="line">            _matProj.identify();</div><div class="line">            _matWorld.identify();</div><div class="line">        &#125;</div><div class="line">		void	onInit()</div><div class="line">		&#123;</div><div class="line">			setRadius(109);</div><div class="line">			perspectivethis(55.0f, float(SCREENWIDTH) / float(SCREENHEIGHT), 1.0000f, 100000.0f);</div><div class="line">			setEye(float3(0,69.6,84.3));</div><div class="line">			setTarget(float3(0,0.5,0));</div><div class="line">			calcDir();</div><div class="line">			setUp(float3(0,1,0));</div><div class="line">			rotateView(0);</div><div class="line">			update();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">        float   getRadius() const </div><div class="line">        &#123;</div><div class="line">            return _radius;</div><div class="line">        &#125;</div><div class="line">        void    setRadius(float val)</div><div class="line">        &#123; </div><div class="line">            _radius = val; </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        float3 getEye() const </div><div class="line">        &#123; </div><div class="line">            return _eye;</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">        *   设置眼睛的位置</div><div class="line">        */</div><div class="line">        void    setEye(float3 val)</div><div class="line">        &#123; </div><div class="line">            _eye    =   val; </div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">        *   计算方向</div><div class="line">        */</div><div class="line">        void    calcDir()</div><div class="line">        &#123;</div><div class="line">            _dir    =   _target - _eye;	</div><div class="line">            _dir    =   normalize(_dir);</div><div class="line">        &#125;</div><div class="line">        float3 getTarget() const </div><div class="line">        &#123; </div><div class="line">            return _target;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        void    setTarget(float3 val) </div><div class="line">        &#123; </div><div class="line">            _target = val;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        float3 getUp() const </div><div class="line">        &#123; </div><div class="line">            return _up;</div><div class="line">        &#125;</div><div class="line">        void    setUp(float3 val)</div><div class="line">        &#123;</div><div class="line">            _up = val;</div><div class="line">        &#125;</div><div class="line">        float3  getDir() const</div><div class="line">        &#123;</div><div class="line">            return  _dir;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        float3  getRight() const</div><div class="line">        &#123;</div><div class="line">            return  _right;</div><div class="line">        &#125;</div><div class="line">        void    update()</div><div class="line">        &#123;</div><div class="line">            float3  upDir   =   normalize(_up);</div><div class="line">            _eye        =   _target - _dir * _radius;</div><div class="line">            _right      =   normalize(cross(_dir, upDir));</div><div class="line"></div><div class="line">            _matView    =   lookAt(_eye,_target,_up);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">		void    setViewSize(const float2&amp; viewSize)</div><div class="line">		&#123;</div><div class="line">			_viewSize   =   viewSize;</div><div class="line">		&#125;</div><div class="line">        void    setViewSize(float x,float y)</div><div class="line">        &#123;</div><div class="line">            _viewSize   =   float2(x,y);</div><div class="line">        &#125;</div><div class="line">        float2  getViewSize()</div><div class="line">        &#123;</div><div class="line">            return  _viewSize;</div><div class="line">        &#125;</div><div class="line">        void    orthothis( float left, float right, float bottom, float top, float zNear, float zFar )</div><div class="line">        &#123;</div><div class="line">            _matProj    =   ortho&lt;float&gt;(left,right,bottom,top,zNear,zFar);</div><div class="line">        &#125;</div><div class="line">        void    setProject(const matrix4&amp; proj)</div><div class="line">        &#123;</div><div class="line">            _matProj    =   proj;</div><div class="line">        &#125;</div><div class="line">        const matrix4&amp; getProject() const</div><div class="line">        &#123;</div><div class="line">            return  _matProj;</div><div class="line">        &#125;</div><div class="line">        const matrix4&amp;  getView() const</div><div class="line">        &#123;</div><div class="line">            return  _matView;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        void    perspectivethis(float fovy, float aspect, float zNear, float zFar)</div><div class="line">        &#123;</div><div class="line">            _matProj    =   perspective&lt;float&gt;(fovy,aspect,zNear,zFar);</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        /**</div><div class="line">        *   世界坐标转化为窗口坐标</div><div class="line">        */</div><div class="line">        bool    project( const float4&amp; world, float4&amp; screen )</div><div class="line">        &#123;</div><div class="line">            screen  =   (_matProj * _matView * _matWorld) * world;</div><div class="line">            if (screen.w == 0.0f)</div><div class="line">            &#123;</div><div class="line">                return false;</div><div class="line">            &#125;</div><div class="line">            screen.x    /=  screen.w;</div><div class="line">            screen.y    /=  screen.w;</div><div class="line">            screen.z    /=  screen.w;</div><div class="line"></div><div class="line">            // map to range 0 - 1</div><div class="line">            screen.x    =   screen.x * 0.5f + 0.5f;</div><div class="line">            screen.y    =   screen.y * 0.5f + 0.5f;</div><div class="line">            screen.z    =   screen.z * 0.5f + 0.5f;</div><div class="line"></div><div class="line">            // map to viewport</div><div class="line">            screen.x    =   screen.x * _viewSize.x;</div><div class="line">            screen.y    =   _viewSize.y - (screen.y * _viewSize.y);</div><div class="line">            return  true;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        /**</div><div class="line">        *   世界坐标转化为窗口坐标</div><div class="line">        */</div><div class="line">        float2  wordToScreen( const float3&amp; world)</div><div class="line">        &#123;</div><div class="line">            float4  worlds(world.x,world.y,world.z,1);</div><div class="line">            float4  screens;</div><div class="line">            project(worlds,screens);</div><div class="line">            return  float2(screens.x,screens.y);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        /**</div><div class="line">        *   窗口坐标转化为世界坐标</div><div class="line">        */</div><div class="line">        float3  screenToWorld(const float2&amp; screen)</div><div class="line">        &#123;</div><div class="line">            float4  screens(screen.x,screen.y,0,1);</div><div class="line">            float4  world;</div><div class="line">            unProject(screens,world);</div><div class="line">            return  float3(world.x,world.y,world.z);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        float3  screenToWorld(float x,float y)</div><div class="line">        &#123;</div><div class="line">            float4  screens(x,y,0,1);</div><div class="line">            float4  world;</div><div class="line">            unProject(screens,world);</div><div class="line">            return  float3(world.x,world.y,world.z);</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        /**</div><div class="line">        *   窗口坐标转化为世界坐标</div><div class="line">        */</div><div class="line">        bool    unProject( const float4&amp; screen, float4&amp; world )</div><div class="line">        &#123;</div><div class="line">            float4 v;</div><div class="line">            v.x =   screen.x;</div><div class="line">            v.y =   screen.y;</div><div class="line">            v.z =   screen.z;</div><div class="line">            v.w =   1.0;</div><div class="line"></div><div class="line">            // map from viewport to 0 - 1</div><div class="line">            v.x =   (v.x) /_viewSize.x;</div><div class="line">            v.y =   (_viewSize.y - v.y) /_viewSize.y;</div><div class="line">            //v.y = (v.y - _viewPort.Y) / _viewPort.Height;</div><div class="line"></div><div class="line">            // map to range -1 to 1</div><div class="line">            v.x =   v.x * 2.0f - 1.0f;</div><div class="line">            v.y =   v.y * 2.0f - 1.0f;</div><div class="line">            v.z =   v.z * 2.0f - 1.0f;</div><div class="line"></div><div class="line">            matrix4  inverse = (_matProj * _matView * _matWorld).inverse();</div><div class="line"></div><div class="line">            v   =   v * inverse;</div><div class="line">            if (v.w == 0.0f)</div><div class="line">            &#123;</div><div class="line">                return false;</div><div class="line">            &#125;</div><div class="line">            world   =   v / v.w;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">         /**</div><div class="line">        *   下面的函数的功能是将摄像机的观察方向绕某个方向轴旋转一定的角度 </div><div class="line">        *   改变观察者的位置，目标的位置不变化</div><div class="line">        */</div><div class="line">        void    rotateView(float angle) </div><div class="line">        &#123; </div><div class="line">            _dir    =   rotateY&lt;float&gt;(_dir,angle);</div><div class="line">        &#125;</div><div class="line">		void    rotateViewX(float angle) </div><div class="line">		&#123; </div><div class="line">			_dir    =   rotateX&lt;float&gt;(_dir,angle);</div><div class="line">		&#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure><br><br><h2 id="7">6、应用</h2>

<p>  本文所举例的为3D渲染的部分，并不包含2D渲染。3D渲染引擎曾制作了一款名为“3D足球”的游戏。本人博客上有对该游戏项目的讲解。</p>
</div><div class="tags"><a href="/tags/研究实现/">研究实现</a></div><div class="post-nav"><a href="/2018/08/01/Page简历/" class="pre">个人简历</a><a href="/2017/03/14/Box2D物理引擎搭建和应用/" class="next">Box2D物理引擎搭建和应用</a></div><div data-thread-key="2017/03/14/3D渲染引擎的实现尝试/" data-title="OpenGL ES 2.0环境下3D渲染引擎实现" data-url="http://yoursite.com/2017/03/14/3D渲染引擎的实现尝试/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到:</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/03/14/3D渲染引擎的实现尝试/" data-title="OpenGL ES 2.0环境下3D渲染引擎实现" data-url="http://yoursite.com/2017/03/14/3D渲染引擎的实现尝试/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/研究实现/" style="font-size: 15px;">研究实现</a> <a href="/tags/项目/" style="font-size: 15px;">项目</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/01/Page简历/">个人简历</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/14/3D渲染引擎的实现尝试/">OpenGL ES 2.0环境下3D渲染引擎实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/14/Box2D物理引擎搭建和应用/">Box2D物理引擎搭建和应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/13/3D足球/">游戏Demo4.3D足球</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/音乐派对/">游戏Demo3.音乐派对</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/11/西游龙宫-大鱼吃小鱼/">游戏Demo2.西游龙宫</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/11/欢乐斗牛/">游戏Demo1.斗牛游戏</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/11/粒子效果之飘落物体/">粒子效果之飘落物体</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-commt"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.2.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:null" target="_blank" class="fa fa-email"> </a><a href="http://weibo.com/2532203704/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" target="_blank" class="fa fa-weibo"></a><a href="https://github.com/Zengbz" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">zbz</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script>var duoshuoQuery = {short_name:'zengbz'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    document.getElementsByTagName('body')[0].appendChild(ds);
})();
</script><script type="text/javascript" src="/js/search.json.js?v=1.2.0"></script></body></html>